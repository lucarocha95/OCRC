<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Onde Cagar Running Club (OCRC)</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <style>
        body {
            margin: 0;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #f2f2f2;
            color: #333;
        }

        header {
            background-color: #a2d149;
            padding: 1rem;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        #map {
            height: 90vh;
            width: 100%;
        }

        .popup-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .popup-section {
            margin-bottom: 0.5em;
        }

        .stars {
            color: #f39c12;
            /* Cor das estrelas */
        }
    </style>
</head>

<body>
    <header>
        üöΩ Onde Cagar Running Club - OCRC üèÉ‚Äç‚ôÇÔ∏èüí®
    </header>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([-22.97, -43.2], 13); // Centra o mapa na posi√ß√£o m√©dia

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        const bathrooms = [
            {
                "Banheiro": "Posto Ipiranga - Maria Quit√©ria",
                "Bairro": "Lagoa",
                "Endere√ßo": "Av. Epit√°cio Pessoa, 1354 - Ipanema, Rio de Janeiro - RJ, 22471-002",
                "Plus Code": "2Q9V+MF Ipanema, Rio de Janeiro - RJ",
                "Latitude": -22.9806791348418,
                "Longitude": -43.2063125045963,
                "Limpeza": 5,
                "Facilidade/Disponibilidade": 5,
                "Atendimento": 5,
                "Proximidade da Pista": 5,
                "Pre√ßo": 5,
                "Coment√°rios": "Melhor banheiro da lagoa, n√£o precisa nem falar com a atendente, s√≥ subir e usar. Limpo, sempre com papel.",
                "Avaliador": "Luca Rocha"
            },
            {
                "Banheiro": "Posto Ipiranga - Remo Botafogo",
                "Bairro": "Lagoa",
                "Endere√ßo": "Av. Epit√°cio Pessoa, 3666 - Lagoa, Rio de Janeiro - RJ, 22471-003",
                "Plus Code": "2QGR+MW Lagoa, Rio de Janeiro - RJ",
                "Latitude": -22.973124798948,
                "Longitude": -43.2076767757608,
                "Limpeza": 5,
                "Facilidade/Disponibilidade": 3,
                "Atendimento": 4,
                "Proximidade da Pista": 5,
                "Pre√ßo": 3,
                "Coment√°rios": "Bom banheiro, mas tem que pagar R$3,50. Atendentes simp√°ticos, mas rola aquele olhar desconfort√°vel de quem sabe que vai ter trabalho pra limpar o banheiro depois do caos.",
                "Avaliador": "Luca Rocha"
            },
            {
                "Banheiro": "Posto BR - Parque da Catacumba",
                "Bairro": "Lagoa",
                "Endere√ßo": "Av. Epit√°cio Pessoa, S/N - Lagoa, Rio de Janeiro - RJ, 22471-003",
                "Plus Code": "2QGW+VQ Lagoa, Rio de Janeiro - RJ",
                "Latitude": -22.9726643100373,
                "Longitude": -43.2030625045967,
                "Limpeza": 1,
                "Facilidade/Disponibilidade": 3,
                "Atendimento": 3,
                "Proximidade da Pista": 5,
                "Pre√ßo": 5,
                "Coment√°rios": "Nunca tem papel, muitas vezes o ch√£o estava alagado ou o banheiro interditado. N√£o recomendo",
                "Avaliador": "Luca Rocha"
            },
            {
                "Banheiro": "Hilton Copacabana",
                "Bairro": "Leme",
                "Endere√ßo": "Av. Atl√¢ntica, 1020 - Copacabana, Rio de Janeiro - RJ, 22010-000",
                "Plus Code": "2RPG+6M Copacabana, Rio de Janeiro - RJ",
                "Latitude": -22.9642794223069,
                "Longitude": -43.1733232334326,
                "Limpeza": 5,
                "Facilidade/Disponibilidade": 1,
                "Atendimento": 3,
                "Proximidade da Pista": 5,
                "Pre√ßo": 5,
                "Coment√°rios": "Tem que se humilhar para o seguran√ßa deixar voc√™ entrar no hotel para usar o banheiro. Extremamente limpo e confort√°vel.",
                "Avaliador": "Luca Rocha"
            },
            {
                "Banheiro": "Posto BR - Aterro do Flamengo",
                "Bairro": "Flamengo",
                "Endere√ßo": "Av. Infante Dom Henrique, S/N - Flamengo, Rio de Janeiro - RJ, 22021-140",
                "Plus Code": "3R9G+MM Flamengo, Rio de Janeiro - RJ",
                "Latitude": -22.9307505063117,
                "Longitude": -43.1733619859609,
                "Limpeza": 2,
                "Facilidade/Disponibilidade": 2,
                "Atendimento": 2,
                "Proximidade da Pista": 4,
                "Pre√ßo": 3,
                "Coment√°rios": "Atendentes sempre com m√° vontade, muitas vezes falaram que n√£o estava funcionando (mesmo tendo pessoas saindo) e o masculino n√£o tem vaso.",
                "Avaliador": "Luca Rocha"
            },
            {
                "Banheiro": "Marina da Gloria",
                "Bairro": "Gl√≥ria",
                "Endere√ßo": "Av. Infante Dom Henrique, S/N - Flamengo, Rio de Janeiro - RJ, 22021-140",
                "Plus Code": "3R9G+MM Flamengo, Rio de Janeiro - RJ",
                "Latitude": -22.9200722584758,
                "Longitude": -43.1693442353115,
                "Limpeza": 5,
                "Facilidade/Disponibilidade": 3,
                "Atendimento": 5,
                "Proximidade da Pista": 3,
                "Pre√ßo": 5,
                "Coment√°rios": "Banheiro bom, mas s√≥ funciona depois das 8AM. J√° fui salvo por um anjo que me levou no banheiro dos funcion√°rios.",
                "Avaliador": "Luca Rocha"
            }
        ];

        // Fun√ß√£o para criar a string de estrelas
        function renderStars(rating) {
            let stars = '';
            for (let i = 0; i < 5; i++) {
                if (i < rating) {
                    stars += '<i class="fas fa-star stars"></i>'; // Estrela preenchida
                } else {
                    stars += '<i class="far fa-star stars"></i>'; // Estrela vazia
                }
            }
            return stars;
        }

        // Fun√ß√£o para calcular a nota geral
        function calculateAverageRating(b) {
            const ratings = [
                b.Limpeza,
                b["Facilidade/Disponibilidade"],
                b.Atendimento,
                b["Proximidade da Pista"],
                b.Pre√ßo
            ];
            const average = ratings.reduce((acc, rating) => acc + rating, 0) / ratings.length;
            return average.toFixed(1); // M√©dia arredondada para 1 casa decimal
        }

        // Adicionando os banheiros ao mapa
        bathrooms.forEach(b => {
            const averageRating = calculateAverageRating(b);
            const popup = `
        <div class="popup-title">${b.Banheiro}</div>
        <div class="popup-section"><strong>Bairro:</strong> ${b.Bairro}</div>
        <div class="popup-section"><strong>Endere√ßo:</strong> ${b.Endere√ßo}</div>
        <div class="popup-section"><strong>Nota Geral:</strong> ${averageRating}/5.0</div>
        <div class="popup-section"><strong>Notas:</strong><br>
          Limpeza: ${renderStars(b.Limpeza)}<br>
          Disponibilidade: ${renderStars(b["Facilidade/Disponibilidade"])}<br>
          Atendimento: ${renderStars(b.Atendimento)}<br>
          Proximidade: ${renderStars(b["Proximidade da Pista"])}<br>
          Pre√ßo: ${renderStars(b.Pre√ßo)}
        </div>
        <div class="popup-section"><strong>Coment√°rios:</strong> ${b.Coment√°rios || 'Sem coment√°rios'}</div>
      `;

            L.marker([b.Latitude, b.Longitude]).addTo(map).bindPopup(popup); // Usando as coordenadas de latitude e longitude de cada banheiro
        });
    </script>
</body>

</html>